# 2023 XmasContest A
https://atcoder.jp/contests/xmascon23/editorial/8972

## 問題の解釈
### 我々ができること
まず、$`k`$ を $`2, 3, 4 `$ から一つ選んで、

```math
\begin{align}
a = 2^{\dfrac{1}{k}}
\end{align}
```
のもとで、
$`1 : 1+a`$ の長方形を利用することができる。

### ゴール
$`1:a`$ の長方形タイルを重ならないように、一辺の長さ $r \in R$ の正方形に余白がないように敷き詰めることが目標である。
ただし、$`k \in \lbrace 2, 3, 4 \rbrace`$  をはじめに一つだけ選択し、$r$ についても都合が良いように自分で設定して良い。
また、使うタイルの枚数についても、自分で設定して良い。その枚数を $`n`$ とする。

出力するのは、$`n, k, r`$ と各長方形の座標（$`a_i, b_i, c_i, d_i`$）である。

## 解法
イメージとしては、辺の比が有理数となるような長方形タイルを構築することができれば、それをある整数個だけ並べれば正方形を構築できそう、という考え。
なので、$`1:a`$の長方形タイルを並べることでなんとか $`1 : q`$ （$`q`$ は有理数）の比を作るのが当面の目標になる。

### 定義
「$`1:x`$ の長方形タイルが利用可能である」とは、
「任意の正の実数 $`t`$ に対して、縦と横の長さがそれぞれ $`t, xt`$ or $`xt, t`$ となる」長方形タイルを敷き詰めに利用して良い」という状況を表す。

### アイデア
1. 和
$`1:x`$ と $`1:y`$ の長方形タイルが利用可能だとする。
すると、縦横の長さがそれぞれ$`t, xt`$ と $`y, yt`$ の二つの長方形を横に連結することで、
$`1: (x+y)`$ の長方形タイルを作ることができる。

3. 逆数
$`1:x`$ の長方形タイルが利用可能だとする。すると直ちに
$`\dfrac{1}{x}:1`$ の長方形タイルも利用可能である。

### 具体的なアイデア
$`1: 1+a`$ （ただし、$`a = 1 + 2^{\dfrac{1}{k}}`$） に逆数や和の演算を駆使して、辺比が有理数になるような長方形タイルを作る。

まず逆数を試してみる。
```math
\begin{align}
1: 1+a = \dfrac{1}{1+a} : 1
\end{align}
```
で、ここから計算を進めることができるのは、 $`a = 2^{\dfrac{1}{k}}`$ の元では $`k`$ が奇数でないと話が進まない！従って $k=3$ に限って進めてみる。
$`s = 2^{\dfrac{1}{3}}`$ とおくと、

```math
\begin{align}
1: 1+a
$ = 1 : 1 + s \\
& =  \dfrac{1}{1+s} : 1
& = \dfrac{(1-s+s^2)}{(1+s)(1-s+s^2)} : 1 \\
& = \dfrac{1 - s + s^2}{1 + s^3} : 1 \\
& = \dfrac{1}{3} (1 - s + s^2) : 1
\end{align}
```
となり、$`\dfrac{1}{3} (1 - s + s^2) : 1`$ の辺比の長方形は「逆数」の操作によって作成できることがわかった。









